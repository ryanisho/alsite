(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3269],{3269:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var a=n(2322),i=n(2784),r=n(2531),o=n(3618),c=n(2552),l=n.n(c),u=n(1333),s=n(2001),d=n(4770),f=function(e){var t=e.title,n=e.narratives,c=void 0===n?[]:n,f=e.media,g=void 0===f?[]:f,m=e.focusMedia,h=void 0===m?[]:m,v=e.dontFocusLastNarrative,p=void 0!==v&&v,y=e.introType,_=(0,i.useRef)(null),x=(0,i.useRef)(s.p8.timeline({defaults:{ease:d.bJ.easeOut}})),k=(0,i.useRef)(null),b=(0,i.useRef)(null),j=y||"from-outside",A=function(){var e=x.current;e.kill(),e.clear()};return(0,i.useEffect)((function(){return function(){A();var e=x.current,t=k.current.querySelectorAll(":scope > *"),n=b.current.querySelectorAll(":scope > *"),a=k.current.querySelectorAll('[data-animation-type="focus"]'),i=k.current.querySelectorAll(':scope > *:not([data-animation-type="focus"])');e.set(n,{opacity:0,y:-100}),"from-outside"===j?(e.set(k.current,{scale:2,opacity:0}),t.forEach((function(n,a){e.set(n,{y:20*(t.length-a),ease:d.bJ.easeNone})})),e.to(k.current,{scale:1,opacity:1,duration:1,delay:.3})):"from-center"===j&&(t.forEach((function(t,n){var a=getComputedStyle(t);t.setAttribute("data-ml",a.marginLeft),t.setAttribute("data-mt",a.marginTop),e.set(t,{x:"-50%",y:"-50%",scale:1.5,marginLeft:0,marginTop:0})})),t.forEach((function(t){e.to(t,{marginLeft:t.getAttribute("data-ml"),marginTop:t.getAttribute("data-mt"),x:0,y:0,scale:1,delay:.7,duration:1},"0")}))),n.forEach((function(t,i){e.to(t,{opacity:1,y:i===n.length-1&&a.length>0&&!p?"70%":0,duration:.6},"-=0.3"),(i<n.length-1||p)&&e.to(t,{opacity:0,y:100,duration:.7})})),a.length>0&&(a.forEach((function(t,n){e.to(t,{scale:1.2,marginLeft:0,marginTop:0,duration:1,y:"".concat(p?10*n-50:-10*n-100,"%"),x:"".concat(10*n-50,"%")},"<")})),e.to(i,{opacity:0,duration:.5},"<")),e.seek(0),e.pause()}(),function(){A()}}),[]),(0,u.Z)(_,!1,(function(e){x.current.seek(e/100*x.current.duration())})),(0,a.jsx)("div",{ref:_,style:{height:"".concat(1.1*(c.length+h.length)*100,"vh")},className:l().mediacollage,children:(0,a.jsxs)("div",{className:l().sticky,children:[t?(0,a.jsx)(r.x.Caption,{type:"secondary",className:l().title,children:t}):null,(0,a.jsxs)("div",{ref:k,className:l().collage,children:[h.map((function(e,t){return(0,a.jsx)("div",{"data-animation-type":"focus",children:(0,a.jsx)(o.B5,{blok:e})},t)})),g.map((function(e,t){return(0,a.jsx)("div",{children:(0,a.jsx)(o.B5,{blok:e})},t)}))]}),(0,a.jsx)("div",{ref:b,className:l().narratives,children:c.map((function(e,t){return(0,a.jsx)("div",{children:(0,a.jsx)(o.B5,{blok:e})},t)}))})]})})}},1333:function(e,t,n){"use strict";var a=n(2784);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=function(){if(e.current){var a=e.current.getBoundingClientRect();requestAnimationFrame((function(){var e=-(a.top-window.innerHeight)/(a.height+(t?window.innerHeight:0))*100;e=(e=e<=0?0:e)>100?100:e,n&&n(e)}))}};(0,a.useEffect)((function(){return window.addEventListener("scroll",i),i(),function(){window.removeEventListener("scroll",i)}}),[])}},2552:function(e){e.exports={mediacollage:"MediaCollage_mediacollage__SQ2MY",sticky:"MediaCollage_sticky__SeCkV",title:"MediaCollage_title__haYzv",collage:"MediaCollage_collage__AVZ5M",narratives:"MediaCollage_narratives__xRVAq"}}}]);